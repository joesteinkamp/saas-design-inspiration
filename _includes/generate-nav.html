{% assign url_parts = page.url | split: '/' %}
{% assign url_parts_size = url_parts | size %}
{% assign rm = url_parts | last %}
{% assign base_url = page.url | replace: rm %}

<ul id="generated-nav" class="menu">
{% for node in site.pages %}
  {% if node.url contains base_url %}
    {% assign node_url_parts = node.url | split: '/' %}
    {% assign node_url_parts_size = node_url_parts | size %}
    {% assign filename = node_url_parts | last %}
    {% if node.url != '/' and node.url != '/feed.xml' and node.url != '/sitemap.xml' and node.url != '/robots.txt' and filename != 'style.css' %}
      <li class="menu-item"><a href='.{{node.url}}' class="menu-item-a">{{ node.url | remove: '/' }}</a></li>
    {% endif %}
  {% endif %}
{% endfor %}
</ul>




<script type="text/javascript">
  function sortList(ul){
      var new_ul = ul.cloneNode(false);
      var lis = [];
      for(var i = ul.childNodes.length; i--;){
          if(ul.childNodes[i].nodeName === 'LI')
              lis.push(ul.childNodes[i]);
      }
      lis.sort(function(a, b){
         return parseInt(b.childNodes[0].data , 10) - parseInt(a.childNodes[0].data , 10);
      });
      for(var i = 0; i < lis.length; i++)
          new_ul.appendChild(lis[i]);
      ul.parentNode.replaceChild(new_ul, ul);
  }
  !function(){
      var ul = document.getElementById('generated-nav');
      sortList( ul );
      alert('ran');
  }();
</script>